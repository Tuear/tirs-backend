# 移除数据库相关导入
import random
from service.database_service import DatabaseService
from service.review_service import ReviewService
from uuid import uuid4
from faker import Faker
import hashlib

fake = Faker('zh_CN')

# 固定用户ID池
USER_IDS = ["柒尾", "杨梅", "舒凡", "BR"]

# 定义大学列表
universities = [
    "北京大学", "清华大学", "复旦大学", "上海交通大学", "浙江大学", "南京大学", "中国科学技术大学", "哈尔滨工业大学",
    "西安交通大学", "中国人民大学", "北京航空航天大学", "北京师范大学", "南开大学", "天津大学", "中山大学", "山东大学",
    "华中科技大学", "吉林大学", "厦门大学", "武汉大学", "东南大学", "中南大学", "大连理工大学", "西北工业大学", "同济大学",
    "华南理工大学", "重庆大学", "兰州大学", "华东师范大学", "中国农业大学", "电子科技大学", "中央民族大学",
    "西北农林科技大学", "四川大学", "湖南大学", "东北大学", "中国海洋大学", "北京理工大学", "北京交通大学", "北京工业大学",
    "北京科技大学", "北京化工大学", "北京邮电大学", "北京林业大学", "北京中医药大学", "北京外国语大学", "中国传媒大学",
    "对外经济贸易大学", "中央音乐学院", "中国政法大学", "华北电力大学", "中国石油大学（北京）", "中国地质大学（北京）", "天津医科大学",
    "河北工业大学", "太原理工大学", "内蒙古大学", "辽宁大学", "大连海事大学", "延边大学", "东北师范大学", "哈尔滨工程大学", "东北农业大学",
    "东北林业大学", "华东理工大学", "东华大学", "上海大学", "上海外国语大学", "苏州大学", "南京航空航天大学",
    "南京理工大学", "中国矿业大学", "河海大学", "江南大学", "南京农业大学", "中国药科大学", "安徽大学", "合肥工业大学", "福州大学", "南昌大学",
    "郑州大学", "武汉理工大学", "华中农业大学", "华中师范大学", "中南财经政法大学", "湖南师范大学", "暨南大学", "华南师范大学",
    "广西大学", "海南大学", "西南交通大学", "西南石油大学", "四川农业大学", "西南大学", "西南财经大学", "贵州大学", "云南大学",
    "西藏大学", "西北大学", "西安电子科技大学", "长安大学", "陕西师范大学", "广州大学", "青海大学", "宁夏大学",
    "新疆大学", "石河子大学", "首都医科大学", "南方医科大学", "中国科学院大学", "中国社会科学院大学", "江苏大学", "南京医科大学",
    "浙江工业大学", "杭州电子科技大学", "上海理工大学", "燕山大学", "山西大学", "河南大学", "宁波大学", "扬州大学", "湘潭大学", "深圳大学",
    "华南农业大学", "福建师范大学", "上海师范大学", "首都师范大学", "北京语言大学", "国际关系学院", "西南政法大学", "东北财经大学",
    "江西财经大学", "南京邮电大学", "重庆邮电大学", "长沙理工大学", "昆明理工大学", "上海中医药大学"
]

# 定义学院列表
departments = [
    "计算机科学与技术学院", "电子工程学院", "机械工程学院", "材料科学与工程学院",
    "生命科学学院", "数学学院", "物理学院", "化学化工学院", "经济管理学院",
    "法学院", "医学院", "建筑学院", "外国语学院", "艺术学院","文学院", "历史学院", "哲学学院", "马克思主义学院", "新闻传播学院",
    "网络空间安全学院", "光电信息学院", "航空航天学院", "船舶与海洋工程学院","机械工程学院", "电气工程学院",
    "能源与动力工程学院", "材料科学与工程学院", "土木工程学院","环境与资源学院","金融学院","基础医学院", "临床医学院", "口腔医学院",
    "电影学院", "音乐学院", "控制科学与工程学院", "数据科学与工程学院", "物联网工程学院", "区块链研究院", "人机交互研究所"
]

# 学术特征描述
academic_traits = [
        # 基础学术词汇
        "学术", "研究", "论文", "项目", "课题", "实验", "发表", "期刊", "会议", "专利",
        "算法", "模型", "数据", "分析", "理论", "方法", "创新", "成果", "领域", "方向",
        # 研究类型
        "基础研究", "应用研究", "理论研究", "实证研究", "定量研究", "定性研究", "交叉研究",
        # 研究资源
        "经费", "资源", "资金", "实验室", "设备", "数据库", "资料", "文献", "数据集", "计算资源",
        "财力", "资源支持", "经费支持", "经费充足", "经费保障", "资金支持", "资源提供", "资源利用", "资源利用效率",
        "财力雄厚", "资金支持", "资金保障", "资金支持力度", "资金支持力度高", "资金支持力度低",
        # 研究产出
        "发表物", "出版物", "专著", "著作", "报告", "软著", "软件著作权", "技术方案", "解决方案",
        # 学术评价
        "影响因子", "引用", "索引", "顶刊", "顶会", "核心期刊", "SCI", "EI", "SSCI", "CSSCI",
        "高被引", "高影响力", "高水平", "优秀论文",
        # 学术活动
        "学术会议", "研讨会", "工作坊", "讲座", "报告会", "学术交流", "合作研究", "产学研", "校企合作",
        # 学科方向
        "人工智能", "机器学习", "深度学习", "自然语言处理", "计算机视觉", "大数据", "物联网", "区块链",
        "神经网络", "图像处理", "语音识别", "推荐系统", "数据挖掘", "知识图谱", "强化学习", "计算机图形学",
        "网络安全", "云计算", "边缘计算", "生物信息学", "计算生物学", "金融科技", "智慧医疗", "智能交通",
        "机器人", "自动化", "智能制造", "量子计算", "集成电路", "芯片设计",
        # 学术级别
        "国家级", "省级", "市级", "校级", "重点", "重大项目", "面上项目", "青年项目", "创新项目",
        # 学生相关
        "科研训练", "毕设", "毕业论文", "毕业设计", "大创", "创新创业", "科研竞赛", "科研项目", "科研经历",
        # 新增学术能力描述
        "科研能力突出", "学术视野开阔", "理论功底扎实", "实验设计精巧", "数据分析精准", "模型构建能力强",
        "创新思维活跃", "研究视角独特", "学术洞察敏锐", "跨学科融合能力强", "前沿领域深耕",
        "技术转化高效", "科研规划清晰", "研究进度把控好", "学术资源丰富", "国际合作广泛",
        # 新增学术指导描述
        "论文指导细致", "实验指导耐心", "研究方法传授好", "学术写作指导强", "课题选择建议精准",
        "研究思路启发佳", "学术问题解答透彻", "科研素养培养好", "学术规范要求严格", "文献阅读指导有效",
        # 新增学术资源描述
        "计算资源充足", "实验设备先进", "数据资源丰富", "学术交流机会多", "国际会议支持足",
        "科研经费充足", "研究团队强大", "学术网络广泛", "数据库访问权限全", "实验材料供应及时",
        # 新增学术态度描述
        "治学严谨", "科研态度端正", "学术诚信高", "追求卓越", "精益求精",
        "开放包容", "鼓励创新", "尊重多元观点", "批判思维培养", "学术热情高",
        # 新增短小口语化表达
        "点子多", "实验溜", "分析准", "模型强",
        "路子野", "眼光毒", "经费足", "装备顶", "数据库全",
        "报销快", "机会多", "资源多", "挂名爽", "大佬带",
        "改文细", "无私教", "文献透", "理论清", "课题多",
        "不差钱", "项目多", "顶会常", "高产王", "卷科研",
        "实验牛", "挖数据", "老司机", "经费足", "硬件好",
        "软件新", "数据足", "眼光准", "设备新", "批钱快",
        "材料足", "算力强", "指导细", "思路清", "一点通",
        "压力小", "节奏稳", "氛围好", "不骂人", "教得细",
        "入门易", "耐心足", "小白友", "零基础", "训练好",
        "毕设强", "大创多", "竞赛牛", "资源广", "合作多",
        "结合好", "自由高", "方向活", "选题自由", "兴趣尊",
        # 更短的两字表达
        "高产", "点子王", "实验狂", "分析神", "模型神",
        "经费多", "设备好", "报销爽", "挂名多", "带飞",
        "改文细", "教得好", "文献强", "理论神", "项目王",
        "顶会王", "卷王", "数据神", "司机稳", "硬件顶",
        "软件强", "数据多", "眼光毒", "批钱爽", "材料够",
        "算力足", "指导好", "思路好", "反应快", "压力小",
        "节奏好", "氛围棒", "不骂人", "教得透", "入门快",
        "耐心好", "小白好", "零门槛", "训练强", "毕设好",
        "大创全", "竞赛强", "资源多", "合作广", "结合紧",
        "自由高", "方向多", "选题活", "兴趣重", "点通"
                                                
        #基础学术词汇与研究类型
        "搞科研的", "做学问的", "写paper", "发文章", "做项目的", "搞课题的", "做实验的", "发paper", "投期刊", "赶会议",
        "申请专利", "设计算法", "建模型", "跑数据", "做分析", "玩理论的", "研究方法论", "搞创新的", "出成果的",
        "研究领域的", "方向选择", "纯理论探索", "偏应用开发的", "理论派研究", "实验验证型", "数据分析型", "访谈调查型",
        "跨学科融合",

        # 研究资源与经费
        "项目预算", "硬件软件资源", "科研资金", "实验场地", "仪器设备", "数据仓库", "参考资料", "文献库", "训练数据集",
        "GPU算力", "经济实力", "资源到位", "经费给力", "预算充足", "经费有保障", "资金到位", "设备管够", "资源共享",
        "高效利用设备", "财大气粗", "资金后盾强", "资金保障足", "资金倾斜多", "资金支持给劲儿", "资金紧张",

        # 研究产出与成果
        "发表的文章", "出版的书籍", "学术专著", "专业著作", "研究报告", "软件著作权", "代码版权", "技术文档",
        "系统方案",

        # 学术评价体系
        "期刊影响力指数", "被引次数", "检索收录", "顶级期刊", "顶尖会议", "核心刊物", "SCI期刊", "EI索引", "社科核心",
        "中文核心", "热门论文", "高影响力研究", "高质量成果", "获奖论文",

        # 学术活动形式
        "学术年会", "专题研讨", "技能培训", "专家讲座", "成果汇报", "学术访问", "联合攻关", "产学研结合",
        "企业合作项目",

        # 热门学科方向
        "AI领域", "机器学习方向", "深度神经网络", "NLP方向", "CV视觉方向", "海量数据处理", "物联网技术", "区块链应用",
        "神经网络模型", "图像识别", "语音技术", "推荐算法", "大数据挖掘", "知识图谱构建", "强化学习算法",
        "计算机图形学", "信息安全", "云服务平台", "边缘计算设备", "生物信息分析", "计算生物模型", "金融科技产品",
        "智慧医疗系统", "智能交通方案", "机器人研发", "自动化控制", "智能工厂", "量子计算机", "芯片电路设计",
        "集成电路开发",

        # 项目级别
        "国家重点项目", "省部级课题", "市级课题", "校级课题", "重点攻关项目", "重大专项", "常规项目", "青年基金",
        "创新课题",

        # 学生科研活动
        "科研入门训练", "毕业论文", "毕业课题设计", "本科毕设", "创新创业项目", "双创竞赛", "学科竞赛", "参与科研课题",
        "实验室经历"

]

responsibility_traits = [
        # 基本性格特征
        "耐心", "严格", "轻松", "负责任", "友好", "压力大", "氛围", "团队", "指导", "沟通",
        "时间", "自由", "支持", "帮助", "经验", "开放", "鼓励", "要求", "关心", "交流", "佛系",
        # 指导风格
        "散养", "放养", "细致", "系统", "深入", "投入", "时间多", "时间少", "定期会议", "随时沟通",
        "线上交流", "面对面", "活跃", "严肃", "和谐", "竞争", "合作", "宽松", "严谨", "灵活",
        "个性化", "定制化", "因材施教", "引导式", "启发式", "手把手", "细致入微",
        # 个人特质
        "年轻", "资深", "经验丰富", "有活力", "有耐心", "有责任心", "有热情", "有亲和力", "有领导力",
        "有创造力", "和蔼", "亲切", "严厉", "温和", "理性", "感性", "务实", "理想主义",
        "创新思维", "批判思维", "严谨思维", "逻辑性强", "幽默", "风趣", "平易近人", "高要求", "低要求",
        "不负责",
        # 学生支持
        "经费支持", "实习推荐", "就业帮助", "学术指导", "论文指导", "职业规划", "深造推荐", "出国推荐",
        "资源提供", "机会提供", "项目参与", "论文合作", "署名机会", "奖学金", "补助", "津贴",
        "心理支持", "情感支持", "生活关心", "职业发展", "人脉资源", "行业资源","对学生好","对学生要求高",
        # 团队文化
        "平等", "包容", "多元", "创新", "协作", "互助", "积极", "向上", "学习型", "研究型",
        "高效率", "快节奏", "慢节奏", "成果导向", "过程导向",
        # 新增responsibility描述
        "主动关心学生", "及时解决问题", "承诺必兑现", "工作一丝不苟", "跟进学生进展",
        "保护学生权益", "维护学术诚信", "尊重学生时间", "危机处理能力强", "支持学生决定",
        # 新增人品特征描述
        "待人真诚", "处事公正", "尊重差异", "富有同理心", "谦虚低调",
        "乐于分享", "信守承诺", "保护隐私", "尊重学生选择", "学术道德高尚",
        # 新增指导风格描述
        "个性化指导", "启发式教学", "鼓励独立思考", "培养自主能力", "提供发展空间",
        "目标导向明确", "反馈具体实用", "鼓励团队协作", "培养领导能力", "注重实践应用"        
        
        #基本性格特征与指导风格
        "特别有耐心", "脾气很好", "不急不躁", "要求挺严格的", "比较较真", "规矩比较多", "氛围比较轻松", "不会太紧张",
        "挺随和的", "超级负责任", "做事很靠谱", "交给ta很放心", "人很友好", "很好相处", "没什么架子", "感觉压力有点大",
        "节奏比较紧张", "挺push的", "整个氛围很好", "氛围比较严肃", "氛围挺自由的", "团队感很强", "团队合作挺好的",
        "团队人不多但很精", "指导得很到位", "给的建议很中肯", "很会带学生", "沟通起来很顺畅", "有什么说什么",
        "交流很直接", "时间安排挺紧的", "时间上比较自由", "时间观念很强", "自由度很高", "不太管细节", "主要靠自己发挥",
        "非常支持学生", "有求必应（在合理范围内）", "是学生的后盾", "很乐意帮助学生", "有问题找ta准没错", "帮人很热心",
        "经验非常丰富", "老江湖了", "懂得很多", "思想很开放", "接受新事物", "愿意听不同声音", "经常鼓励学生",
        "多表扬少批评", "很会激励人", "要求比较高", "要求比较明确", "没什么硬性要求", "很关心学生", "交流起来很舒服",
        "交流没啥障碍", "交流不多但很有效", "比较佛系", "不怎么催", "顺其自然", "基本放养", "自己摸索", "导师管得少",
        "指导特别细致", "连标点符号都管", "抠细节", "指导很系统", "有章法", "一步步来", "研究做得很深入", "要求深挖",
        "不浮于表面", "对指导学生很投入", "花很多精力", "导师时间比较多", "能经常讨论", "导师比较忙",
        "能分给学生的时间有限", "有固定的组会，每周一次", "有事随时可以找", "微信/电话基本都回",
        "主要通过微信/邮件/线上会议交流", "更喜欢当面讨论", "经常约办公室聊", "组里气氛很活跃", "大家爱讨论",
        "组会/讨论比较严肃", "不太开玩笑", "组里关系很和谐", "没啥矛盾", "组里有点竞争氛围", "大家暗自较劲", "鼓励合作",
        "经常一起做项目", "管理比较宽松", "deadline可以商量", "治学非常严谨", "要求一丝不苟", "方式比较灵活",
        "看情况调整", "会根据每个人的特点定制培养方案", "很懂学生", "知道怎么教不同的人", "主要是引导你思考",
        "不给现成答案", "擅长启发", "能点醒你", "初期会手把手教", "带着做", "关注到每一个小点", "指导无微不至",
]

# 人品特征描述
character_traits = [
        # 新增学生支持描述
        "职业发展指导", "实习推荐积极", "就业资源丰富", "深造支持有力", "生活支持到位",
        "生活关怀细致", "困难时期陪伴", "资源分配合理", "机会提供公平", "人脉资源分享",
        # 新增沟通风格描述
        "沟通高效直接", "倾听耐心细致", "表达清晰明确", "反馈建设性强", "讨论氛围开放",
        "尊重不同意见", "批评方式得当", "鼓励自由表达", "定期一对一交流", "线下交流",
        # 新增团队氛围描述
        "团队凝聚力强", "互助氛围浓厚", "学术氛围自由", "创新氛围浓厚", "竞争氛围健康",
        "跨学科交流多", "师生关系平等", "经验传承良好", "新成员融入快", "成果共享公平",
        "人超好", "脾气好", "没架子", "像朋友", "能扛事",
        "护学生", "不压榨", "不抢功", "不画饼", "说到做",
        "好商量", "接地气", "回复快", "不拖堂", "反馈快",
        "不消失", "放养型", "管得松", "不压力", "心态好",
        "打开", "请客多", "福利多", "关心人", "帮解决",
        "帮找对象", "氛围好", "师兄好", "师弟好", "像家庭",
        "不抢一作", "署名公", "推荐强", "帮工作", "实习强",
        "熬夜陪", "不骂人", "不甩锅", "不施压", "真帮忙"       
        #个人特质
        "导师比较年轻", "思想前卫", "没什么代沟", "导师是大牛", "在领域里很有名", "经验老丰富了", "啥都见过",
        "精力充沛", "充满干劲", "非常有耐心", "不厌其烦", "责任心爆棚", "对学生很上心", "对科研充满热情",
        "很有感染力", "很有亲和力", "让人想亲近", "很有领导魅力", "能服众", "想法天马行空", "很有创意",
        "为人特别和蔼可亲", "像长辈一样", "要求严厉", "批评起来不留情面", "性格温和", "说话轻声细语", "非常理性",
        "讲逻辑不讲情面", "比较感性", "注重感受和人情", "很务实", "看重实际产出和结果", "有点理想主义", "追求完美",
        "思维很创新", "总想打破常规", "善于批判性思考", "爱质疑", "思维极其严谨", "逻辑严密", "逻辑超强", "条理清晰",
        "说话很幽默风趣", "组会不无聊", "一点架子都没有", "很好说话", "对学生要求很高", "期望值大", "要求不高",
        "能毕业就行", "有点不负责任", "不太管学生",

        #学生支持
        "经费比较充足", "出差开会报销爽快", "会帮忙推荐实习", "人脉广", "很关心学生就业", "会帮忙内推",
        "学术上指导很给力", "能学到真东西", "改论文很认真", "能提升很多", "会和你聊职业规划", "给建议", "想读博的话",
        "推荐信", "支持出国交流", "帮忙联系，写推荐信", "能提供各种资源",
        "经常给学生创造机会", "鼓励甚至要求参与项目", "锻炼人", "有机会和导师合作发论文", "只要贡献够",
        "署名比较公平", "给的补助挺不错", "比较慷慨", "会关心学生心理状态", "压力大时能聊聊", "像朋友一样",
        "给予情感支持", "不仅关心学习", "也关心生活状况", "很注重学生长远的职业发展", "导师人脉很广", "能介绍不少牛人",
        "和业界联系紧密", "有行业资源", "对学生是真的好", "处处为学生着想", "对学生要求很高", "期望也高",

        #团队文化
        "组里很平等", "学生敢和导师争论", "氛围很包容", "允许犯错", "尊重多样性", "组员背景多元", "想法也多元",
        "鼓励创新", "不怕试错", "特别强调协作", "互帮互助", "师兄师姐很热心", "乐于助人", "大家都很积极向上",
        "充满正能量", "整体是积极进取的状态", "组里学习氛围浓", "经常分享", "专注研究", "学术氛围浓厚", "做事效率很高",
        "不拖沓", "节奏很快", "项目一个接一个", "节奏比较慢", "可以慢慢琢磨", "非常看重最终成果/产出", "更看重研究过程中的学习和成长"
]


def generate_review_data():
    """生成单条导师评价数据（新增tutor_id生成）"""
    data = {
        "name": fake.name(),
        "university": random.choice(universities),
        "department": random.choice(departments),
        "academic": random.choice(academic_traits),
        "responsibility": random.choice(responsibility_traits),
        "character": random.choice(character_traits),
        "user_id": random.choice(USER_IDS)
    }
    # 生成唯一导师ID（与推荐系统逻辑一致）
    # 修复后的代码：
    identifier = f"{data['name']}_{data['university']}_{data['department']}"
    data["tutor_id"] = f"tutor_{hashlib.sha256(identifier.encode()).hexdigest()}"
    return data

def main():
    print("开始生成并提交导师评价数据...")
    successful_count = 0
    professor_db = DatabaseService('professor')

    for i in range(1, 501):
        review_data = generate_review_data()

        # 直接调用ReviewService写入数据库
        result = ReviewService.submit_review({
            'name': review_data['name'],
            'university': review_data['university'],
            'department': review_data['department'],
            'academic': review_data['academic'],
            'responsibility': review_data['responsibility'],
            'character': review_data['character']
        }, review_data['user_id'])

        if result["success"]:
            successful_count += 1
            print(f"✅ 提交成功: {review_data['name']}")
        else:
            print(f"❌ 提交失败: {review_data['name']}")

    print(f"\n完成！成功提交 {successful_count}/500 条数据")

if __name__ == "__main__":
    main()